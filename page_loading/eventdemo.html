<!doctype html>
<html lang="en">

<head></head>

<body>
    页面显示
</body>
<script>


var userAgent = navigator.userAgent; //取得浏览器的userAgent字符串  
var isOpera = userAgent.indexOf("Opera") > -1; //判断是否Opera浏览器  
var isIE = userAgent.indexOf("compatible") > -1 && userAgent.indexOf("MSIE") > -1 && !isOpera; //判断是否IE浏览器
var isIE11 = userAgent.indexOf("rv:11.0") > -1; //判断是否是IE11浏览器
var isEdge = userAgent.indexOf("Edge") > -1 && !isIE; //判断是否IE的Edge浏览器


if(!isIE && !isEdge && !isIE11) {//兼容chrome和firefox
	var _beforeUnload_time = 0, _gap_time = 0;
	var is_fireFox = navigator.userAgent.indexOf("Firefox")>-1;//是否是火狐浏览器
	window.onunload = function (){
		_gap_time = new Date().getTime() - _beforeUnload_time;
		if(_gap_time <= 5){
			localStorage.setItem("aaaa","点关闭按钮")//浏览器关闭
        }else{//浏览器刷新
            localStorage.setItem("aaaa","浏览器刷新")
		}
 	}
	window.onbeforeunload = function (){ 
		_beforeUnload_time = new Date().getTime();
		if(is_fireFox){//火狐关闭执行
            localStorage.setItem("aaaa","点关闭按钮")//浏览器关闭
		} 
	};
}


if(isIE) {//兼容ie8,9,10
	window.onbeforeunload = function() {
		//alert(0);
        localStorage.setItem("aaaa","点关闭按钮")//浏览器关闭
				
	}
	// window.onunload = onclose;
	// function onclose(){
    //     localStorage.setItem("aaaa","点关闭按钮")//浏览器关闭
	// }
}


    


</script>

</html>